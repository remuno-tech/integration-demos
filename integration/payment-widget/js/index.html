<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      body {
        padding: 0;
        margin: 0;
      }
    </style>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://getbootstrap.com/docs/5.3/assets/css/docs.css"
      rel="stylesheet"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.min.js"
      integrity="sha384-Y4oOpwW3duJdCWv5ly8SCFYWqFDsfob/3GkgExXKV4idmbt98QcxXYs9UoXAB7BZ"
      crossorigin="anonymous"
    ></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="In three simple steps, you’ll be accepting Bitcoin, Ethereum and BNB. No sign-up fee or monthly fees"
    />
    <script
      defer
      src="https://pay-dev.remuno.com/widget.min.js"
      type="text/javascript"
    ></script>
    <script src="widgetConfig.js"></script>
    <script defer src="formUtils.js"></script>
    <link rel="manifest" href="./manifest.json" />
    <title>Remuno - Let your customers checkout in crypto</title>
    <meta
      property="og:title"
      content="Remuno - Let your customers checkout in crypto"
    />
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <div id="root">
      <div class="d-flex">
        <div class="p-2" style="width: 50%; height: 100vh; overflow: auto">
          <div class="mb-3">
            <label for="apiKey" class="form-label">API Key</label>
            <input
              type="text"
              class="form-control"
              onchange="handleChange('apiKey',this.value)"
              id="apiKey"
            />
            <div class="form-text">
              The payment widget should only be used with a Widget API key. If
              the list is empty, please go to the Integration / Api page and
              create one. Remember to enable your key!
            </div>
          </div>
          <div class="mb-3">
            <label for="merchantId" class="form-label">Merchant ID</label>
            <input
              type="text"
              class="form-control"
              onchange="handleChange('merchantId',this.value)"
              id="merchantId"
            />
          </div>
          <div class="mb-3">
            <label for="notificationUrl" class="form-label"
              >Notification URL</label
            >
            <input
              type="text"
              class="form-control"
              onchange="handleChange('notificationUrl',this.value)"
              id="notificationUrl"
            />
            <div class="form-text">
              This is an optional notification URL. Updates to the state of
              transactions will be POSTed to this endpoint.
            </div>
          </div>
          <h2>Styling</h2>
          <div class="mb-3">
            <label for="buttonSize" class="form-label">Button Size</label>
            <select
              id="buttonSize"
              onchange="handleChange('buttonSize',this.value)"
              class="form-select"
            ></select>
          </div>
          <div class="mb-3">
            <label for="theme" class="form-label">Widget Theme</label>
            <select
              id="theme"
              onchange="handleChange('theme',this.value)"
              class="form-select"
            ></select>
            <div class="form-text">
              The theme that the widget will be displayed in
            </div>
          </div>
          <div class="mb-3">
            <label for="variant" class="form-label">Widget Variant</label>
            <select
              id="variant"
              onchange="handleChange('variant',this.value)"
              class="form-select"
            ></select>
            <div class="form-text">
              Choose the type / positioning of the widget that is displayed once
              the button is clicked
            </div>
          </div>
          <div class="mb-3">
            <label for="quoteExpireAnimation" class="form-label"
              >Quote Expiry Animation</label
            >
            <select
              id="quoteExpireAnimation"
              onchange="handleChange('quoteExpireAnimation',this.value)"
              class="form-select"
            ></select>
            <div class="form-text">
              Your customer has a set period of time to settle the crypto
              transaction. When the time expires without payment, the refresh
              quote button will animate according to this setting if they need
              to pay more.
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="showCoinProtocolBanner"
              >Show coin protocol banners</label
            >
            <input
              class="form-check-input"
              onchange="handleChange('showCoinProtocolBanner',this.checked)"
              type="checkbox"
              role="switch"
              id="showCoinProtocolBanner"
            />
            <div class="form-text">
              For coins such as Ethereum, this controls whether to display the
              protocol for tokens (e.g. ERC-20, BEP-20) as a banner on the coin
              image. We recommend leaving this on to make coin identification
              easier for your users.
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="confirmCoinSelection"
              >Confirm coin selection</label
            >
            <input
              class="form-check-input"
              onchange="handleChange('confirmCoinSelection',this.checked)"
              type="checkbox"
              role="switch"
              id="confirmCoinSelection"
            />
            <div class="form-text">
              If enabled, displays a confirmation prompt after the user has
              selected a coin and chooses to proceed with the payment. This is
              enabled by default and we recommend leaving this on, so that the
              user confirms the coin they have chosen is the correct one.
            </div>
          </div>
          <h2>Preview parameters</h2>
          <div class="mb-3">
            <label for="amount" class="form-label">Amount in Fiat</label>
            <input
              type="number"
              class="form-control"
              onchange="handleChange('amount',this.value)"
              id="amount"
            />
            <div class="form-text">
              The amount the customer will be charged (specified in the selected
              fiat currency). Your web page should feed this dynamically to the
              widget for each transaction.
            </div>
          </div>
          <div class="mb-3">
            <label for="fromFiat" class="form-label">Fiat Currency</label>
            <select
              id="fromFiat"
              onchange="handleChange('fromFiat',this.value)"
              class="form-select"
            ></select>
            <div class="form-text">
              The fiat currency that the customer will be charged in
            </div>
          </div>
          <div class="mb-3">
            <label for="orderId" class="form-label">Order ID</label>
            <input
              type="text"
              onchange="handleChange('orderId',this.value)"
              class="form-control"
              id="orderId"
            />
            <div class="form-text">
              This is a unique transaction reference that you provide and is
              mandatory. Your web page should feed this dynamically to the
              widget for each transaction.
            </div>
          </div>
          <div class="mb-3">
            <label for="orderDescription" class="form-label"
              >Order Description</label
            >
            <input
              type="text"
              onchange="handleChange('orderDescription',this.value)"
              class="form-control"
              id="orderDescription"
            />
            <div class="form-text">
              This will provide a description for your transactions e.g “white t
              shirt”
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="marketRate">Market Rate</label>
            <input
              class="form-check-input"
              onchange="handleChange('marketRate',this.checked)"
              type="checkbox"
              role="switch"
              id="marketRate"
            />
            <div class="form-text">
              If enabled, makes the payment widget transaction a market rate
              transaction. For non-market rate transactions, the exchange rate
              is adjusted to include the Remuno fee and then transaction fees
              are added, meaning the buyer bears the cost of the transaction.
              For a market rate transaction, the user is quoted the current
              market exchange rate for a coin and no additional fees are added.
              However, the Remuno fees are deducted at settlement, so the
              merchant bears the cost of the transaction and does not get the
              full amount.
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="isEnabledCustomDetails"
              >Custom Details</label
            >
            <input
              class="form-check-input"
              onchange="handleChange('isEnabledCustomDetails',this.checked)"
              type="checkbox"
              role="switch"
              id="isEnabledCustomDetails"
            />
            <textarea
              style="display: none"
              type="text"
              onchange="handleChange('customDetails',this.value)"
              class="form-control"
              id="customDetails"
            ></textarea>
            <div class="form-text">
              A json object you can store with the transaction. It will be
              returned with the other transaction details when fetching the
              transaction from the API.
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="isEnabledSummary"
              >Items message for quote update</label
            >
            <input
              class="form-check-input"
              onchange="handleChange('isEnabledSummary',this.checked)"
              type="checkbox"
              role="switch"
              id="isEnabledSummary"
            />
            <div style="display: none" id="summaryContainer">
              <label class="form-check-label" for="summaryTemplate"
                >Template</label
              >
              <input
                type="text"
                class="form-control"
                onchange="handleChangeSummaryTemplate(this.value)"
                id="summaryTemplate"
              />
              <div id="summaryVariables"></div>
            </div>
            <div class="form-text">
              For market rate transactions the amount that you will get varies
              per coin, as some coins have larger transaction fees. This feature
              allows you to provide a string which recalculates what the user
              will receive after the coin has been selected or the quote is
              updated. The string is displayed to the buyer within the widget.
            </div>
          </div>
          <div class="mb-3" form-check form-switch>
            <label class="form-check-label" for="isSelectedCoinsEnabled"
              >Selected coins</label
            >
            <input
              class="form-check-input"
              onchange="handleChange('isSelectedCoinsEnabled',this.checked)"
              type="checkbox"
              role="switch"
              id="isSelectedCoinsEnabled"
            />
            <div style="display: none" id="selectedCoinsContainer"></div>
            <div class="form-text">Narrows list of coins to selected ones</div>
          </div>
          <h2>Callbacks</h2>
          <ul>
            <li>onTransactionCompleted: (data: ApiTxn) => void;</li>
            <li>onTransactionExpired: (data: ApiTxn) => void;</li>
            <li>onTransactionCreated: (data: ApiTxn) => void;</li>
            <li>onTransactionFailed: (error?: string) => void;</li>
            <li>onTransactionCancelled: (data: ApiTxn) => void;</li>
            <li>onQuoteUpdated: (data: ApiQuote) => void;</li>
            <li>onOpen: () => void;</li>
            <li>onClose: () => void;</li>
          </ul>
          <h2>Types</h2>
          <div>
            <h4>ApiQuote</h4>
            <div>
              quote: { adjustedAmount: string; amount: string; quote: string;
              fromFiat: string; marketRate: boolean; networkFeesCoin: string;
              networkFeesFiat: string; toCoin: string; createdAt: string;
              exchangeRate: string; nonce: string; toNetwork: string;
              marketExchangeRate: string; }; token: string;
            </div>
            <h4>ApiTxn</h4>
            <div>
              adjustedInitialAmount: string; id: string; txnStatus: 'pending' |
              'confirming' | 'received' | 'quote_expired' | 'expired';
              merchantId: string; walletCoinId: string; orderId: string;
              orderDescription: string; walletAddress: string; fromFiat: string;
              toCoin: string; quote: string; quoteExpiresAt: string;
              paymentMarkupPercent: string; maxPaymentCompletePercent: string;
              minPaymentCompletePercent: string; txnFeePercent: number;
              paymentExpiryPeriodSeconds: number; paymentExpiresAt: string;
              keyName: string | null; paymentStatus: 'underpaid' | 'paid' |
              'overpaid' | 'no_payment' | 'failure'; settlementStatus: string;
              paymentNotificationUrl: string; createdAt: string; updatedAt:
              string; initialAmount: string; receivedAmount: string;
              nextPaymentStatus?: 'underpaid' | 'paid' | 'overpaid' |
              'no_payment' | 'failure';
            </div>
            <h4>ApiCoin</h4>
            <div>
              id: string; displayCode?: string; code: string; displayName:
              string; extraId: string | null; extraIdRegex: string | null;
              logoUrl: string; network: string; protocol: string; tokenAddress?:
              string | null; chainId?: number | null; transferGasLimit: number |
              null; isPromoted?: boolean; isPopular: boolean; isStableCoin:
              boolean; isNativeCoin: boolean; isTrending: boolean; decimals:
              number;
            </div>
          </div>
        </div>
        <div style="padding: 8px">
          <div id="widget-preview"></div>
        </div>
        <div
          class="modal fade"
          id="successPaymentModal"
          tabindex="-1"
          role="dialog"
          aria-labelledby="successPaymentModalTitle"
          aria-hidden="true"
        >
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="successPaymentModalTitle">
                  Success!
                </h5>
                <button
                  type="button"
                  onclick="handleCloseModal()"
                  class="close"
                  data-dismiss="modal"
                  aria-label="Close"
                >
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                Your order ID is <span id="order-id"></span> and your order will
                be dispatched soon.
              </div>
              <div class="modal-footer">
                <button
                  type="button"
                  onclick="handleCloseModal()"
                  class="btn btn-secondary"
                  data-dismiss="modal"
                >
                  Close
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
